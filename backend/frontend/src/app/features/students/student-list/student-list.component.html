<div class="student-list-container">
  <div class="container">
    <div class="page-header">
      <h1>Gestion des √âtudiants</h1>
      <button class="btn btn-primary" routerLink="/students/new">
        + Nouvel √©tudiant
      </button>
    </div>

    <div class="search-section">
      <div class="search-box">
        <input
          type="text"
          [(ngModel)]="searchTerm"
          placeholder="Rechercher un √©tudiant..."
          class="form-control"
          (keyup.enter)="onSearch()"
        >
        <button class="btn btn-secondary" (click)="onSearch()">
          Rechercher
        </button>
      </div>
    </div>

    <div class="loading" *ngIf="isLoading">
      <p>Chargement des √©tudiants...</p>
    </div>

    <div class="students-content" *ngIf="!isLoading">
      <div class="students-table-container" *ngIf="students.length > 0">
        <table class="table">
          <thead>
            <tr>
              <th>Nom complet</th>
              <th>ID √âtudiant</th>
              <th>Email</th>
              <th>Classe</th>
              <th>Moyenne</th>
              <th>Statut</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let student of students">
              <td>{{ getFullName(student) }}</td>
              <td>{{ student.studentId }}</td>
              <td>{{ student.email }}</td>
              <td>{{ student.className || 'Non assign√©' }}</td>
              <td>{{ student.averageGrade ? student.averageGrade.toFixed(2) + '/20' : 'N/A' }}</td>
              <td>
                <span class="status-badge" [class]="getStatusClass(student)">
                  {{ getStatusBadge(student) }}
                </span>
              </td>
              <td class="actions">
                <button class="btn btn-sm btn-secondary" [routerLink]="['/students', student.id]">
                  Voir
                </button>
                <button class="btn btn-sm btn-primary" [routerLink]="['/students', student.id, 'edit']">
                  Modifier
                </button>
                <button class="btn btn-sm btn-danger" (click)="deleteStudent(student)">
                  Supprimer
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <div class="no-students" *ngIf="students.length === 0">
        <div class="no-students-content">
          <div class="no-students-icon">üë•</div>
          <h3>Aucun √©tudiant trouv√©</h3>
          <p *ngIf="searchTerm">Aucun √©tudiant ne correspond √† votre recherche.</p>
          <p *ngIf="!searchTerm">Il n'y a pas encore d'√©tudiants dans le syst√®me.</p>
          <button class="btn btn-primary" routerLink="/students/new" *ngIf="!searchTerm">
            Ajouter le premier √©tudiant
          </button>
        </div>
      </div>

      <div class="pagination" *ngIf="totalPages > 1">
        <button 
          class="btn btn-secondary"
          [disabled]="currentPage === 0"
          (click)="onPageChange(currentPage - 1)"
        >
          Pr√©c√©dent
        </button>
        
        <div class="page-numbers">
          <button
            *ngFor="let page of getPageNumbers()"
            class="btn btn-sm"
            [class]="page === currentPage ? 'btn-primary' : 'btn-secondary'"
            (click)="onPageChange(page)"
          >
            {{ page + 1 }}
          </button>
        </div>
        
        <button 
          class="btn btn-secondary"
          [disabled]="currentPage === totalPages - 1"
          (click)="onPageChange(currentPage + 1)"
        >
          Suivant
        </button>
      </div>

      <div class="pagination-info">
        <p>
          Affichage de {{ (currentPage * pageSize) + 1 }} √† 
          {{ Math.min((currentPage + 1) * pageSize, totalElements) }} 
          sur {{ totalElements }} √©tudiants
        </p>
      </div>
    </div>
  </div>
</div>
